<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP8266 Wi-Fi Radar</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: #0f0; text-align: center; padding: 20px; }
        #radar { position: relative; width: 300px; height: 300px; border: 2px solid #0f0; border-radius: 50%; margin: 20px auto; background: radial-gradient(circle, #1a331a 0%, #000 70%); }
        #needle { position: absolute; top: 50%; left: 50%; width: 4px; height: 140px; background: red; transform-origin: bottom center; transform: translate(-50%, -100%) rotate(0deg); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 0 15px red; border-radius: 2px; }
        .grid { position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; transform: translate(-50%, -50%); border-radius: 50%; border: 1px solid rgba(0,255,0,0.2); pointer-events: none; }
        .controls { background: #222; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #444; }
        button { background: #0f0; color: #000; border: none; padding: 10px 20px; font-weight: bold; border-radius: 5px; cursor: pointer; margin: 5px; }
        #log { font-size: 0.8em; color: #888; height: 100px; overflow-y: scroll; text-align: left; background: #000; padding: 10px; }
    </style>
</head>
<body>

    <h2>Wi-Fi Shadow Radar</h2>
    
    <div class="controls">
        <button onclick="connectSerial()">1. Connect ESP8266</button>
        <input type="file" id="wigleFile" style="display:none" onchange="parseWigle(this)">
        <button onclick="document.getElementById('wigleFile').click()">2. Load WiGle CSV</button>
        <div id="status">Status: Waiting for input...</div>
    </div>

    <div id="radar">
        <div class="grid"
